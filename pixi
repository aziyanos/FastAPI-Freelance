‚úÖ –í—Å—ë –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã:
‚úÖ skill_id –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω - –∫–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã Decimal –¥–ª—è –±—é–¥–∂–µ—Ç–æ–≤
‚úÖ –í—Å–µ timestamp'—ã —Å server_default=func.now()
‚úÖ updated_at —Å onupdate=func.now()
‚úÖ CheckConstraint –Ω–∞ rating (1-5)
‚úÖ –ü–∞—Ä–æ–ª—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–±–µ–∑ nullable=True)
–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ –≤—Å–µ—Ö –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–∞—Ö
‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ user_name, email, category_name
‚úÖ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
‚úÖ Many-to-many —Å–≤—è–∑—å Skill ‚Üî Project
‚úÖ –°–∞–º–æ—Ä–µ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏ –≤ Review (reviewer/target)
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ relationships —Å back_populates
‚úÖ Enum'—ã –¥–ª—è —Ä–æ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤



api
–®–∞–≥	–ß—Ç–æ –¥–µ–ª–∞–µ—Ç	SQL-–∞–Ω–∞–ª–æ–≥	–†–µ–∑—É–ª—å—Ç–∞—Ç
1	db.query(Project)	SELECT * FROM projects	–°–æ–∑–¥–∞—ë—Ç –∑–∞–≥–æ—Ç–æ–≤–∫—É –∑–∞–ø—Ä–æ—Å–∞
2	.filter(Project.id == project_id)	WHERE id = ?	–î–æ–±–∞–≤–ª—è–µ—Ç —É—Å–ª–æ–≤–∏–µ
3	.first()	LIMIT 1	–í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å
4	–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π	‚Äî



"–ú–æ–≥—É –ª–∏ —è —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —ç—Ç–æ–π —Å—Ö–µ–º–æ–π?"
"–ß—Ç–æ –ø—Ä–∏–¥–µ—Ç –≤ API response?"
"–ö–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç/–Ω–µ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å?"
Response –∏–∑ Fetch API –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å


async driver
–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

AsyncSession –≤–º–µ—Å—Ç–æ Session
select() –≤–º–µ—Å—Ç–æ query() –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
await db.execute() –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
result.scalars().all() –∏–ª–∏ result.scalar_one_or_none() –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
await –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –ë–î (commit, refresh, delete)
async_session_maker –≤ get_db (–≤–∞–º –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–≥–æ –≤ database.py
//////////////////////////////////////////

@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
async def get_db():
    async with async_session_maker() as session:
        try:
            yield session
        finally:
            await session.close()
–†–∞–∑–±–æ—Ä –ø–æ —Å—Ç—Ä–æ–∫–∞–º:
1. async def get_db():

–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
–ë—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Depends(get_db)

2. async with async_session_maker() as session:

async_session_maker() - —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é –ë–î
async with - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä–æ–µ—Ç —Å–µ—Å—Å–∏—é)
session - –æ–±—ä–µ–∫—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

3. try: yield session

yield - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–µ—Å—Å–∏—é –≤ endpoint (–Ω–æ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è!)
Endpoint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏—é –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è endpoint, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–µ—Ä–Ω—ë—Ç—Å—è —Å—é–¥–∞

4. finally: await session.close()

–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é (–¥–∞–∂–µ –µ—Å–ª–∏ –±—ã–ª–∞ –æ—à–∏–±–∫–∞)
await - –∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è




...
–†–∞–∑–±–æ—Ä –ø–æ —Å—Ç—Ä–æ–∫–∞–º:
1. @project_router.get("/", response_model=List[ProjectOutSchema])
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

@project_router.get("/") - —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç GET endpoint –Ω–∞ /project/
response_model=List[ProjectOutSchema] - –≥–æ–≤–æ—Ä–∏—Ç FastAPI:

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤
–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è —Å–æ–≥–ª–∞—Å–Ω–æ ProjectOutSchema (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É–±—Ä–∞—Ç—å password)
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é



2. async def list_project(db: AsyncSession = Depends(get_db)):
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

async def - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è (–º–æ–∂–µ—Ç –∂–¥–∞—Ç—å –ë–î –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
db: AsyncSession - –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø–∞ AsyncSession
= Depends(get_db) - FastAPI –≤—ã–∑–æ–≤–µ—Ç get_db() –∏ –ø–µ—Ä–µ–¥–∞—Å—Ç —Å—é–¥–∞ —Å–µ—Å—Å–∏—é

–ê–Ω–∞–ª–æ–≥–∏—è:
python# FastAPI –¥–µ–ª–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
db_session = await get_db()  # –ü–æ–ª—É—á–∞–µ—Ç —Å–µ—Å—Å–∏—é
result = await list_project(db=db_session)  # –ü–µ—Ä–µ–¥–∞—ë—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é
await db_session.close()  # –ó–∞–∫—Ä—ã–≤–∞–µ—Ç —Å–µ—Å—Å–∏—é
3. result = await db.execute(select(Project))
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

select(Project) - —Å–æ–∑–¥–∞—ë—Ç SQL: SELECT * FROM projects
db.execute(...) - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ –ë–î
await - –∂–¥—ë—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç –ë–î (–¥—Ä—É–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ!)
result - –æ–±—ä–µ–∫—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (–ù–ï —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é!)

SQL —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:
sqlSELECT * FROM projects;
4. project_db = result.scalars().all()
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

result.scalars() - –∏–∑–≤–ª–µ–∫–∞–µ—Ç –ø–µ—Ä–≤—É—é –∫–æ–ª–æ–Ω–∫—É –∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ - –æ–±—ä–µ–∫—Ç—ã Project)
.all() - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ —Å–ø–∏—Å–æ–∫ Python

–ü–æ—á–µ–º—É –Ω–µ –ø—Ä–æ—Å—Ç–æ .all()?
python# –ë–ï–ó .scalars() –ø–æ–ª—É—á–∏–º:
[(Project(...),), (Project(...),)]  # –°–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π

# –° .scalars() –ø–æ–ª—É—á–∏–º:
[Project(...), Project(...)]  # –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤
5. return project_db
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ Project
FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —ç—Ç–æ —Å–ø–∏—Å–æ–∫
–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π Project –≤ ProjectOutSchema
–£–±–∏—Ä–∞–µ—Ç –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ ProjectOutSchema (–Ω–∞–ø—Ä–∏–º–µ—Ä, password)
–ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤ JSON



–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∏–µ–Ω—Ç—É:
json[
  {
    "id": 1,
    "project_name": "Website",
    "budget": 5000.00,
    "status": "active",
    "created_at": "2024-01-01T00:00:00",
    "updated_at": "2024-01-01T00:00:00"
  },
  {
    "id": 2,
    "project_name": "Mobile App",
    "budget": 10000.00,
    ...
  }
]

‚ûï 2. POST / - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
python@project_router.post("/", response_model=ProjectOutSchema)
async def create_project(project_data: ProjectCreateSchema,
                         db: AsyncSession = Depends(get_db)):
    new_project = Project(**project_data.dict())
    db.add(new_project)
    await db.commit()
    await db.refresh(new_project)
    return new_project
–†–∞–∑–±–æ—Ä –ø–æ —Å—Ç—Ä–æ–∫–∞–º:
1. project_data: ProjectCreateSchema
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

FastAPI —á–∏—Ç–∞–µ—Ç JSON –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ —Å—Ö–µ–º–µ ProjectCreateSchema (–≤–∞–ª–∏–¥–∞—Ü–∏—è!)
–ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç 422 –æ—à–∏–±–∫—É

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
jsonPOST /project/
{
  "project_name": "New Website",
  "category_id": 1,
  "budget": 5000.00,
  "status": "active"
}
–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Pydantic:
pythonclass ProjectCreateSchema(BaseModel):
    project_name: str  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, —Ç–∏–ø str
    category_id: int = Field(gt=0)  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –±–æ–ª—å—à–µ 0
    budget: Optional[Decimal] = Field(None, ...)  # –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
    status: StatusChoices  # –û–¥–∏–Ω –∏–∑ Enum –∑–Ω–∞—á–µ–Ω–∏–π
–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–≤–∞–ª–∏–ª–∞—Å—å:
json// –ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏–ª: {"project_name": "", "category_id": -1}
// FastAPI –≤–µ—Ä–Ω—ë—Ç:
{
  "detail": [
    {
      "loc": ["body", "project_name"],
      "msg": "ensure this value has at least 1 characters",
      "type": "value_error.any_str.min_length"
    },
    {
      "loc": ["body", "category_id"],
      "msg": "ensure this value is greater than 0",
      "type": "value_error.number.not_gt"
    }
  ]
}
2. new_project = Project(**project_data.dict())
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

project_data.dict() - –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç Pydantic –º–æ–¥–µ–ª—å –≤ —Å–ª–æ–≤–∞—Ä—å:

python  {
    "project_name": "New Website",
    "category_id": 1,
    "budget": Decimal("5000.00"),
    "status": StatusChoices.active
  }

** - —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞—Ä–≥—É–º–µ–Ω—Ç—ã
Project(...) - —Å–æ–∑–¥–∞—ë—Ç SQLAlchemy –æ–±—ä–µ–∫—Ç (–ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ –ë–î!)

–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:
pythonnew_project = Project(
    project_name="New Website",
    category_id=1,
    budget=Decimal("5000.00"),
    status=StatusChoices.active
)
3. db.add(new_project)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–î–æ–±–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –≤ —Å–µ—Å—Å–∏—é (–≤ –ø–∞–º—è—Ç—å)
–ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –ë–î! (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)

–ê–Ω–∞–ª–æ–≥–∏—è:
python# –ö–∞–∫ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫:
shopping_cart.add(milk)  # –î–æ–±–∞–≤–∏–ª–∏ –≤ –∫–æ—Ä–∑–∏–Ω—É
# –ù–æ –µ—â—ë –ù–ï –∫—É–ø–∏–ª–∏!
4. await db.commit()
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–û–¢–ü–†–ê–í–õ–Ø–ï–¢ SQL –≤ –ë–î:

sql  INSERT INTO projects (project_name, category_id, budget, status, created_at, updated_at)
  VALUES ('New Website', 1, 5000.00, 'active', NOW(), NOW());

await - –∂–¥—ë—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –ë–î
–ï—Å–ª–∏ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—Ä—É—à–µ–Ω–∏–µ constraint) ‚Üí –≤—ã–±—Ä–æ—Å–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

5. await db.refresh(new_project)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–û–±–Ω–æ–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î
–ù—É–∂–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è id, created_at, updated_at (–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ë–î)

–î–æ refresh:
pythonnew_project.id  # None (–µ—â—ë –Ω–µ –∑–Ω–∞–µ–º ID)
new_project.created_at  # None
–ü–æ—Å–ª–µ refresh:
pythonnew_project.id  # 5 (–ë–î –ø—Ä–∏—Å–≤–æ–∏–ª–∞ ID)
new_project.created_at  # datetime(2024, 1, 1, 12, 0, 0)
6. return new_project
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

FastAPI –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ ProjectOutSchema
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç JSON –∫–ª–∏–µ–Ω—Ç—É

–†–µ–∑—É–ª—å—Ç–∞—Ç:
json{
  "id": 5,
  "project_name": "New Website",
  "category_id": 1,
  "budget": 5000.00,
  "status": "active",
  "created_at": "2024-01-01T12:00:00",
  "updated_at": "2024-01-01T12:00:00"
}

üîç 3. GET /{id} - –ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω –ø—Ä–æ–µ–∫—Ç
python@project_router.get("/{project_id}", response_model=ProjectDetailSchema)
async def detail_project(project_id: int, db: AsyncSession = Depends(get_db)):
    result = await db.execute(select(Project).filter(Project.id == project_id))
    project_db = result.scalar_one_or_none()
    if not project_db:
        raise HTTPException(status_code=404, detail="Project not found")
    return project_db
–†–∞–∑–±–æ—Ä:
1. /{project_id} –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–µ
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

project_id - path parameter (—á–∞—Å—Ç—å URL)
–ü—Ä–∏–º–µ—Ä—ã: /project/1, /project/42, /project/999

2. project_id: int –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö —Ñ—É–Ω–∫—Ü–∏–∏
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

FastAPI –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ URL –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –≤ int
–ï—Å–ª–∏ /project/abc ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç 422 (–Ω–µ —á–∏—Å–ª–æ)

3. select(Project).filter(Project.id == project_id)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–°–æ–∑–¥–∞—ë—Ç SQL: SELECT * FROM projects WHERE id = ?
filter() - –∞–Ω–∞–ª–æ–≥ WHERE –≤ SQL

SQL —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:
sqlSELECT * FROM projects WHERE id = 5;
4. result.scalar_one_or_none()
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

.scalar_one_or_none() - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

–û–¥–∏–Ω –æ–±—ä–µ–∫—Ç –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω
None –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
–û—à–∏–±–∫—É –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–æ >1 (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ ID)



–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:
python.scalar_one()  # –û—à–∏–±–∫–∞ –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω
.scalars().all()  # –°–ø–∏—Å–æ–∫ (–¥–∞–∂–µ –µ—Å–ª–∏ 1 —ç–ª–µ–º–µ–Ω—Ç)
.scalar_one_or_none()  # None –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚úÖ
5. if not project_db: raise HTTPException(...)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí –≤–µ—Ä–Ω—É—Ç—å 404 –∫–ª–∏–µ–Ω—Ç—É
HTTPException - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å FastAPI

–†–µ–∑—É–ª—å—Ç–∞—Ç –∫–ª–∏–µ–Ω—Ç—É:
json// GET /project/999 (–Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
// HTTP 404
{
  "detail": "Project not found"
}

‚úèÔ∏è 4. PUT /{id} - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
python@project_router.put("/{project_id}", response_model=ProjectOutSchema)
async def update_project(project_id: int, project_data: ProjectUpdateSchema,
                         db: AsyncSession = Depends(get_db)):
    result = await db.execute(select(Project).filter(Project.id == project_id))
    project_db = result.scalar_one_or_none()
    if not project_db:
        raise HTTPException(status_code=404, detail="Project not found")

    for key, value in project_data.dict(exclude_unset=True).items():
        setattr(project_db, key, value)

    await db.commit()
    await db.refresh(project_db)
    return project_db
–†–∞–∑–±–æ—Ä:
1. project_data: ProjectUpdateSchema
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–ö–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä:
jsonPUT /project/5
{
  "project_name": "Updated Name",
  "budget": 7000.00
}
// status, category_id –Ω–µ –º–µ–Ω—è—é—Ç—Å—è
2. project_data.dict(exclude_unset=True)
–≠–¢–û –ö–õ–Æ–ß–ï–í–û–ï!
–ë–µ–∑ exclude_unset:
pythonproject_data.dict()
# {
#   "project_name": "Updated Name",
#   "budget": 7000.00,
#   "status": None,  # ‚ùå –ö–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª!
#   "category_id": None,  # ‚ùå –ë—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω–æ!
# }
–° exclude_unset=True:
pythonproject_data.dict(exclude_unset=True)
# {
#   "project_name": "Updated Name",
#   "budget": 7000.00
# }
# ‚úÖ –¢–æ–ª—å–∫–æ —Ç–æ, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–∏–ª!
3. for key, value in ...: setattr(project_db, key, value)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ —Å–ª–æ–≤–∞—Ä—é
–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∞—Ç—Ä–∏–±—É—Ç—ã –æ–±—ä–µ–∫—Ç–∞

–≠–∫–≤–∏–≤–∞–ª–µ–Ω—Ç:
python# –í–º–µ—Å—Ç–æ:
project_db.project_name = "Updated Name"
project_db.budget = 7000.00

# –ò—Å–ø–æ–ª—å–∑—É–µ–º:
setattr(project_db, "project_name", "Updated Name")
setattr(project_db, "budget", 7000.00)
4. await db.commit()
SQL:
sqlUPDATE projects
SET project_name = 'Updated Name', budget = 7000.00, updated_at = NOW()
WHERE id = 5;
5. await db.refresh(project_db)

–û–±–Ω–æ–≤–ª—è–µ—Ç updated_at –∏–∑ –ë–î


üóëÔ∏è 5. DELETE /{id} - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
python@project_router.delete("/{project_id}")
async def delete_project(project_id: int, db: AsyncSession = Depends(get_db)):
    result = await db.execute(select(Project).filter(Project.id == project_id))
    project_db = result.scalar_one_or_none()
    if not project_db:
        raise HTTPException(status_code=404, detail="Project not found")

    await db.delete(project_db)
    await db.commit()
    return {"message": "Project deleted"}
–†–∞–∑–±–æ—Ä:
1. await db.delete(project_db)
–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

–ü–æ–º–µ—á–∞–µ—Ç –æ–±—ä–µ–∫—Ç –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (–≤ –ø–∞–º—è—Ç–∏)
–ù–ï —É–¥–∞–ª—è–µ—Ç –∏–∑ –ë–î!

2. await db.commit()
SQL:
sqlDELETE FROM projects WHERE id = 5;
3. return {"message": "Project deleted"}
–†–µ–∑—É–ª—å—Ç–∞—Ç:
json{
  "message": "Project deleted"
}
```

---

## üìä **–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
```
1. GET /project/
   Client ‚Üí FastAPI ‚Üí get_db() ‚Üí DB.execute(SELECT) ‚Üí scalars().all() ‚Üí [Projects] ‚Üí Client

2. POST /project/
   Client JSON ‚Üí ProjectCreateSchema (validation) ‚Üí Project(**dict) ‚Üí db.add() ‚Üí db.commit() ‚Üí DB INSERT ‚Üí db.refresh() ‚Üí Client

3. GET /project/5
   Client ‚Üí DB.execute(SELECT WHERE id=5) ‚Üí scalar_one_or_none() ‚Üí Project or 404 ‚Üí Client

4. PUT /project/5
   Client JSON ‚Üí ProjectUpdateSchema ‚Üí dict(exclude_unset) ‚Üí setattr() ‚Üí db.commit() ‚Üí DB UPDATE ‚Üí Client

5. DELETE /project/5
   Client ‚Üí DB.execute(SELECT WHERE id=5) ‚Üí db.delete() ‚Üí db.commit() ‚Üí DB DELETE ‚Üí Client

üéØ –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:
Sync vs Async:
python# SYNC (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±)
def list_project(db: Session = Depends(get_db)):
    projects = db.query(Project).all()  # ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç FastAPI
    return projects

# ASYNC (—Ç–≤–æ–π –∫–æ–¥)
async def list_project(db: AsyncSession = Depends(get_db)):
    result = await db.execute(select(Project))  # ‚úÖ –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç
    projects = result.scalars().all()
    return projects
–ü–æ—á–µ–º—É await –≤–∞–∂–µ–Ω:
python# –ë–ï–ó await (–ù–ï –†–ê–ë–û–¢–ê–ï–¢!)
result = db.execute(select(Project))  # –í–µ—Ä–Ω—ë—Ç coroutine, –∞ –Ω–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

# –° await
result = await db.execute(select(Project))  # ‚úÖ –î–æ–∂–¥—ë—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
–¶–µ–ø–æ—á–∫–∞: execute ‚Üí scalars ‚Üí all:
pythonresult = await db.execute(select(Project))
# result - —ç—Ç–æ Result –æ–±—ä–µ–∫—Ç

scalars = result.scalars()
# scalars - –∏—Ç–µ—Ä–∞—Ç–æ—Ä –ø–æ –ø–µ—Ä–≤–æ–π –∫–æ–ª–æ–Ω–∫–µ

projects = scalars.all()
# projects - —Å–ø–∏—Å–æ–∫ [Project, Project, ...]